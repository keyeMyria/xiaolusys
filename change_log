############2015-12-07#####################
CREATE INDEX `flashsale_pay_product_refund_record_3216ff68` ON `flashsale_pay_product_refund_record` (`created`);
############2015-12-05#####################
alter table flashsale_productdetail  add column `is_sale` bool NOT NULL;
alter table flashsale_productdetail  add column `order_weight` integer NOT NULL;
CREATE INDEX `flashsale_productdetail_650909aa` ON `flashsale_productdetail` (`is_sale`);
CREATE INDEX `flashsale_productdetail_522af0b0` ON `flashsale_productdetail` (`order_weight`);
############2015-11-16#####################
alter table flashsale_refund add column proof_pic longtext;
alter table flashsale_order add column `sign_time` datetime default null;

alter table supplychain_supply_supplier add column `level` int(11) NOT NULL default 50 ,add index SC_SP_SR_LEVEL_IDX (`level`);
alter table supplychain_supply_supplier add column `speciality` varchar(256) NOT NULL ;
alter table supplychain_supply_supplier add column `total_select_num` int(11) NOT NULL;
alter table supplychain_supply_supplier add column `total_sale_num` double precision NOT NULL;
alter table supplychain_supply_supplier add column `total_sale_amount` double precision NOT NULL;
alter table supplychain_supply_supplier add column `total_refund_num`  int(11) NOT NULL;
alter table supplychain_supply_supplier add column `total_refund_amount` double precision NOT NULL;
alter table supplychain_supply_supplier add column `avg_post_days`  double precision NOT NULL;
alter table supplychain_supply_supplier add column `last_select_time` datetime default null;
alter table supplychain_supply_supplier add column `last_schedule_time` datetime default null;

############2015-11-07#####################
alter table flashsale_pay_product_refund_record add column contactor bigint(20) NOT NULL DEFAULT 0;
alter table flashsale_pay_product_refund_record add column pro_model bigint(20) NOT NULL DEFAULT 0;
CREATE INDEX `flashsale_pay_product_refund_record_2c61ea09` ON `flashsale_pay_product_refund_record` (`contactor`);
CREATE INDEX `flashsale_pay_product_refund_record_da20976f` ON `flashsale_pay_product_refund_record` (`pro_model`);
############2015-11-07#####################
alter table supplychain_supply_schedule_manage_detail add column design_take_over varchar(32) default "nottakeover" NOT NULL;
alter table supplychain_supply_schedule_manage_detail add column design_person varchar(32) null;
############2015-10-07#####################
alter table supply_chain_stats_daily add return_pro int(11) default 0;
############2015-10-30###################
alter table pay_coupon_template add use_fee double Not null;
########### 2015-10-24########### 2015-10-28 ################# #################
alter table supply_chain_stats_daily  add fahuo_num int(11) default 0;
########### 2015-10-24########### 2015-10-20 ################# #################
alter table shop_items_product add column offshelf_time datetime DEFAULT NULL;
########### 2015-10-20 #################
alter table supplychain_hot_product add column proid int(11) default 0;
########### 2015-10-19 #################
alter table supplier_sale_product_praise add column pro_from int(11) default 0;
alter table supplychain_supply_product add voting boolean NOT NULL default False;
############2015-10-13######################
alter table xiaolumm_xiaolumama add lowest_uncoushout double Not null;
############2015-10-9#####################
alter table flashsale_register  add initialize_pwd tinyint(1) default 0 NOT NULL;
############2015-10-8#####################
alter table flashsale_dinghuo_returngoods add status int(11) default 0;
############2015-10-07#####################
alter table shop_items_productsku add sku_inferior_num int(11) default 0;
############2015-10-04######################
alter table xiaolumm_xiaolumama add column modified datetime NOT NULL;
############2015-9-28######################
alter table xiaolumm_xiaolumama add target_complete double Not null;
########### 2015-9-25################
alter table pay_coupon_template add column limit_num int(11) default 1;
########### 2015-9-18 #################
alter table shop_items_product add column sale_product bigint(20) NOT NULL DEFAULT 0;
CREATE INDEX `shop_items_product_bdef1e5a` ON `shop_items_product` (`sale_product`);
########### 2015-9-17 #################
alter table supply_chain_stats_order add refund_num int(11) default 0;
alter table supply_chain_stats_order add refund_amount_num int(11) default 0;
########### 2015-9-17 #################
alter table shop_items_contrastcontent add column status varchar(32) default 'normal';
alter table shop_items_contrastcontent add column sid int(11) default 0;
########### 2015-9-6 #################
alter table flashsale_productdetail modify column note varchar(256);
########### 2015-8-26 #################
alter table flashsale_order add discount_fee double NOT NULL;
########### 2015-8-26 #################
CREATE INDEX `shop_items_product_52094d6e` ON `shop_items_product` (`name`);
CREATE INDEX `shop_items_product_aff30766` ON `shop_items_product` (`model_id`);
CREATE INDEX `flashsale_productdetail_44e36594` ON `flashsale_productdetail` (`is_recommend`);
CREATE INDEX `flashsale_productdetail_28ffeec5` ON `flashsale_productdetail` (`is_seckill`);
CREATE INDEX `flashsale_productdetail_dfd6476a` ON `flashsale_productdetail` (`buy_limit`);
CREATE INDEX `suplychain_flashsale_orderdetail_bb420c12` ON `suplychain_flashsale_orderdetail` (`product_id`,`chichu_id`);
########### 2015-8-24 #################
alter table flashsale_productdetail add column material varchar(64) null;
alter table flashsale_productdetail add column color varchar(64) null;
alter table flashsale_productdetail add column wash_instructions varchar(128) null;
alter table flashsale_productdetail add column note varchar(64) null;
########### 2015-8-22 #################
alter table shop_items_product add ware_by int(11) NOT NULL;
alter table shop_items_product add index SH_IT_PR_SF_SU_ST_WB_IDX(sale_time,shelf_status,ware_by);
########### 2015-8-15 #################
ALTER TABLE flashsale_tongji_shopping ADD rebetamount INT(11) DEFAULT 0; 
########### 2015-8-13 #################
alter table flashsale_shoppingcart add column remain_time datetime DEFAULT NULL;
########### 2015-8-6 #################
alter table flashsale_productdetail add is_seckill boolean NOT NULL default False;
########### 2015-7-31 #################
ALTER TABLE shop_trades_mergetrade ADD INDEX IDX_TYPE (TYPE);
########### 2015-7-25 #################
alter table flashsale_productdetail add mama_rebeta int(11) NOT NULL;
########### 2015-7-18 #################
ALTER TABLE shop_refunds_product ADD reason INT(11) DEFAULT 0;
########### 2015-7-16 #################
alter table flashsale_productdetail add column is_recommend tinyint NOT NULL;
########### 2015-7-14 #################
alter table flashsale_productdetail add column mama_discount int(11) NOT NULL default 100;
alter table flashsale_trade add column discount_fee  double precision NOT NULL;
########### 2015-7-10 #################
alter table shop_items_product add column model_id bigint NOT NULL DEFAULT 0;
########### 2015-7-6 #################
alter table flashsale_daily_popularize_cost add column carrylog_red_packet double NOT NULL;

########### 2015-7-4 #################
alter table shop_items_itemnumtasklog add index SH_IT_IT_INDEX(outer_id,sku_outer_id);
ALTER TABLE shop_weixin_unionid ADD INDEX IDX_UNIONID_APP_KEY (UNIONID,APP_KEY);

########### 2015-6-27 #################
alter table suplychain_flashsale_orderlist add column p_district varchar(32) default "1" NOT NULL after status;
alter table suplychain_flashsale_orderlist add column reach_standard tinyint(1) default 0 NOT NULL after p_district;

alter table xiaolumm_order_red_packet add column created datetime NOT NULL;
alter table xiaolumm_order_red_packet add column modified datetime NOT NULL;

########### 2015-6-22 #################
alter table suplychain_flashsale_orderlist add column supplier_shop varchar(32) NOT NULL after supplier_name;

########### 2015-6-15 #################
alter table django_admin_log change object_id object_id varchar(64) NOT NULL;
ALTER TABLE django_admin_log ADD INDEX IDX_OB_CO_AC_US (OBJECT_ID,CONTENT_TYPE_ID,ACTION_TIME,USER_ID);
ALTER TABLE django_admin_log ADD INDEX IDX_USER_ID_CONTENT_TYPE_ID (USER_ID,CONTENT_TYPE_ID,ACTION_TIME)

########### 2015-6-12 #################
alter table xiaolumm_xiaolumama add column hasale tinyint(1) NOT NULL;
alter table xiaolumm_xiaolumama add column charge_time datetime;

alter table flashsale_clickcount drop index date, add unique index linkid(linkid,date);
alter table flashsale_weekcount_table drop index week_code ,add unique index linkid(`linkid`,`week_code`);
########### 2015-6-10 #################
alter table suplychain_flashsale_orderdetail add column arrival_time datetime after non_arrival_quantity;

########### 2015-6-8 #################
alter table xiaolumm_xiaolumama add column progress varchar(8) NOT NULL;
CREATE INDEX `xiaolumm_xiaolumama_4ad8f7e` ON `xiaolumm_xiaolumama` (`progress`);
########### 2015-6-5 #################
ALTER TABLE django_admin_log ADD INDEX IDX_USER_ID_CONTENT_TYPE_ID (USER_ID,CONTENT_TYPE_ID);
CREATE INDEX `shop_trades_mergetrade_6bac1c39` ON `shop_trades_mergetrade` (`receiver_phone`);
CREATE INDEX `shop_trades_mergetrade_4508aeb0` ON `shop_trades_mergetrade` (`weight_time`);

########### 2015-6-4 #################

alter table flashsale_tongji_shopping add column status int(11) NOT NULL;
########### 2015-6-3 #################
ALTER TABLE suplychain_flashsale_orderlist  MODIFY COLUMN updated datetime;
ALTER TABLE suplychain_flashsale_orderdetail  MODIFY COLUMN created datetime;
ALTER TABLE suplychain_flashsale_orderdetail  MODIFY COLUMN updated datetime;

########### 2015-6-2 #################
alter table suplychain_flashsale_orderdetail add column non_arrival_quantity int(11) not Null after arrival_quantity;
alter table suplychain_flashsale_orderdetail add column inferior_quantity int(11) not Null after non_arrival_quantity;

########### 2015-5-27 #################
alter table shop_weixin_product add column created datetime NOT NULL;
alter table shop_weixin_product add column modified datetime NOT NULL;

alter table shop_weixin_productsku add column created datetime NOT NULL;
alter table shop_weixin_productsku add column modified datetime NOT NULL;
########### 2015-5-26  #################
alter table shop_items_product add column is_verify tinyint NOT NULL;
alter table shop_items_product add column shelf_status int(11) NOT NULL;
########### 2015-5-14  #################
alter table xiaolumm_carrylog add column log_type varchar(8) NOT NULL;
alter table xiaolumm_carrylog add column carry_type varchar(8) NOT NULL;

update xiaolumm_carrylog set status='confirmed',log_type='refund',carry_type='in' where status='confirmed';
update xiaolumm_carrylog set status='confirmed',log_type='buy',carry_type='out' where status='consumed';

alter table flashsale_tongji_shopping_day add column buyercount int(11) NOT NULL;
alter table flashsale_tongji_shopping add column wxordernick varchar(32) NOT NULL;
########### 2015-5-7  #################
ALTER TABLE `shop_weixin_user` ADD INDEX shop_weixin_user_vmobile(vmobile);
########### 2015-5-5  #################
alter table shop_items_productsku add column lock_num int(11) NOT NULL;
alter table flashsale_productdetail add column buy_limit tinyint(1) NOT NULL;
alter table flashsale_productdetail add column per_limit int(11) NOT NULL;
########### 2015-5-4  #################
ALTER TABLE `xiaolumm_xiaolumama` ADD column charge_status varchar(16) NOT NULL,ADD INDEX `xiaolumm_xiaolumama`(`charge_status`);
ALTER TABLE `xiaolumm_xiaolumama` ADD column user_group_id bigint(20) DEFAULT NULL, ADD CONSTRAINT `xiaolumm_user_group_id` FOREIGN KEY (`user_group_id`) REFERENCES `shop_weixin_group` (`id`);
########### 2015-3-31  #################
create index idx_mergetrade_receiver_phone on shop_trades_mergetrade(receiver_phone);
########### 2015-3-23  #################
alter table shop_items_product change retrieval_num sale_num int(11) NOT NULL;
alter table shop_items_productsku change retrieval_num sale_num int(11) NOT NULL;
alter table shop_items_product add column sale_time date,add index item_sale_time_idx(sale_time);
########### 2015-3-16  #################
alter table shop_items_product add column sale_charger varchar(32) NOT NULL, add index (sale_charger);
alter table shop_items_product add column storage_charger varchar(32) NOT NULL, add index (storage_charger);
########### 2015-3-9  #################
alter table shop_weixin_account add js_ticket varchar(256) NOT NULL;
alter table shop_weixin_account add js_expired datetime NOT NULL;
########### 2015-3-5  #################
alter table shop_weixin_sale_linkclicks add link_type varchar(8) NOT NULL;
update shop_weixin_sale_linkclicks set link_type='sample';
alter table shop_weixin_sale_linkclicks drop index shop_weixin_sale_linkclicks_6338e735;
create index shop_weixin_sale_linkclicks_118edc33 on shop_weixin_sale_linkclicks(link_type);
create unique index user_openid on shop_weixin_sale_linkclicks(user_openid,link_url,link_type);
########### 2015-2-27  #################
alter table shop_weixin_user add referal_count int(11) NOT NULL;
update shop_weixin_user set charge_status = 'uncharge';
alter table shop_weixin_user add charge_status varchar(16) NOT NULL;
########### 2015-2-10  #################
alter table shop_items_daysale add column confirm_num int(11) NOT NULL;
alter table shop_items_daysale add column confirm_payment double NOT NULL;
######## 2015-1-22 ##########
alter table shop_weixin_user add column unionid varchar(64) NOT NULL;
alter table shop_weixin_user add index shop_weixin_user_9ac2212(unionid);
######## 2015-1-5##########
create unique index uniq_item_outer_and_sku_id on shop_memorule_composerule(`outer_id`,`outer_sku_id`,`type`) ;
######## 2014-12-20##########
alter table shop_flashsale_supplier add column memo varchar(1024) NOT NULL;
######## 2014-12-18##########
alter table shop_flashsale_product add column contactor_id int(11) references auth_user(id);
alter table games_bomb_weixinbomb add column creator_id int(11) references auth_user(id);
######## 2014-12-12 ##########
alter table shop_flashsale_product add column sale_price double NOT NULL;
alter table shop_flashsale_product add column memo varchar(1024) NOT NULL;
######## 2014-12-12 ##########
alter table shop_flashsale_product add column hot_value int(11) NOT NULL;
######## 2014-12-9 ##########
alter table shop_flashsale_product add column status varchar(16) NOT NULL;
update shop_flashsale_product set status='wait';
######## 2014-10-30 ##########
alter table shop_weixin_user_award add select_val int(11) NOT NULL;
alter table supplychain_pick_item add identity  int(11) NOT NULL;
######## 2014-10-22 ##########
alter table shop_weixin_user add column created datetime NOT NULL;
alter table shop_weixin_user add column modified datetime NOT NULL;
update shop_weixin_user set created = subscribe_time,modified=subscribe_time;
######## 2014-9-30 ##########
alter table shop_weixin_user add column created datetime NOT NULL;
alter table shop_weixin_user add column modified datetime NOT NULL;
update shop_weixin_user set created = subscribe_time,modified=subscribe_time;
######## 2014-9-29 ##########
rename table shop_taobao_asynctask to shop_asynctask_taobao;
rename table shop_wexin_exam_problem to shop_weixin_exam_problem;
rename table shop_wexin_exam_paper to shop_weixin_exam_paper;
rename table shop_weixin_exam_user_proble to shop_weixin_exam_user_problem;
######## 2014-9-28 ##########
create unique index code on shop_weixin_vipcode(code);
######## 2014-9-16 ##########
create unique index user_openid on shop_wexin_user_paper(user_openid,paper_id);
######## 2014-9-12 ##########
create unique index owner_openid_id on shop_weixin_vipcode(owner_openid_id);
######## 2014-9-6 ##########
alter table shop_weixin_user add column user_group_id int(11);
ALTER TABLE shop_weixin_user ADD CONSTRAINT fk_user_group FOREIGN KEY (user_group_id) REFERENCES shop_weixin_group (id);
######## 2014-8-26 ##########
alter table shop_trades_mergeorder drop index shop_trades_mergeorder_132f42da;
alter table shop_trades_mergeorder drop index shop_trades_mergeorder_3216ff68;
alter table shop_trades_mergeorder drop index shop_trades_mergeorder_2e774e98;
alter table shop_trades_mergeorder drop index shop_trades_mergeorder_6b9b2d4f;
alter table shop_trades_mergeorder drop index shop_trades_mergeorder_4db90882;
alter table shop_trades_mergeorder drop index shop_trades_mergeorder_1e04cc3c;
alter table shop_trades_mergeorder drop index shop_trades_mergeorder_310979e8;

alter table shop_trades_mergetrade drop index shop_trades_mergetrade_36528e23;
alter table shop_trades_mergetrade drop index shop_trades_mergetrade_5341e6d3;
alter table shop_trades_mergetrade drop index idx_mergetrade_receiver_phone;
alter table shop_trades_mergetrade drop index index_mergetrade_charge_time;
alter table shop_trades_mergetrade drop index shop_trades_mergetrade_132f42da;
alter table shop_trades_mergetrade drop index shop_trades_mergetrade_5436e97a;
alter table shop_trades_mergetrade drop index shop_trades_mergetrade_3216ff68;

alter table shop_orders_order drop column hour;
alter table shop_orders_order drop column day;
alter table shop_orders_order drop column week;
alter table shop_orders_order drop column month;
alter table shop_orders_order drop column year;

alter table shop_orders_order drop index shop_orders_order_132f42da;
alter table shop_orders_order drop index shop_orders_order_3216ff68;
alter table shop_orders_order drop index shop_orders_order_2e774e98;
alter table shop_orders_order drop index shop_orders_order_6b9b2d4f;

alter table shop_orders_trade drop column hour;
alter table shop_orders_trade drop column day;
alter table shop_orders_trade drop column week;
alter table shop_orders_trade drop column month;
alter table shop_orders_trade drop column year;

alter table shop_orders_trade drop index shop_orders_trade_132f42da;
alter table shop_orders_trade drop index shop_orders_trade_5436e97a;
alter table shop_orders_trade drop index shop_orders_trade_801e862;
alter table shop_orders_trade drop index shop_orders_trade_3216ff68;
alter table shop_orders_trade drop index shop_orders_trade_2e774e98;
alter table shop_orders_trade drop index shop_orders_trade_6b9b2d4f;
alter table shop_orders_trade drop index shop_orders_trade_2ef613c9;

alter table shop_fenxiao_purchaseorder drop index shop_fenxiao_purchaseorder_1375c848;
alter table shop_fenxiao_purchaseorder drop index shop_fenxiao_purchaseorder_132f42da;
alter table shop_comments_grade drop index shop_comments_grade_37f27cb7;
alter table shop_comments_grade drop index shop_comments_grade_5bc4e2d4;
######## 2014-8-23 ##########
alter table shop_weixin_response add column fuzzy_match tinyint(1) NOT NULL;
update shop_weixin_response set fuzzy_match=1;
######## 2014-8-7 ##########
alter table shop_weixin_user add column vmobile varchar(24) NOT NULL;
######### 2014-8-1 ##########
alter table shop_weixin_product add sync_stock tinyint(1) NOT NULL;
update shop_weixin_product set sync_stock=1 ;
######### 2014-7-28 ##########
alter table shop_trades_mergetrade add column scanner varchar(16) NOT NULL;
alter table shop_trades_mergetrade add column weighter varchar(16) NOT NULL;
######### 2014-7-28 ##########
alter table shop_refunds_refund drop index refund_id;
alter table shop_refunds_refund change refund_id refund_id varchar(32) NOT NULL;
alter table shop_refunds_refund change tid tid varchar(32) NOT NULL;

create unique index uqk_refund_id_trade_id on shop_refunds_refund(refund_id,tid);
######### 2014-7-25 ##########
alter table shop_weixin_order add column receiver_zone varchar(24) NOT NULL;
######### 2014-7-24 ###### zifei ####
alter table shop_weixin_user change baby_nick receiver_name varchar(64) NOT NULL;
alter table shop_weixin_user drop column baby_birth;
alter table shop_weixin_user add column birth_year int(11) DEFAULT 0;
alter table shop_weixin_user add column birth_month int(11) DEFAULT 0;
alter table shop_weixin_user add column referal_from_openid varchar(64) NOT NULL;
######### 2014-7-23 ########
alter table shop_weixin_account change jmenu jmenu varchar(4096) NOT NULL;
alter table shop_trades_mergebuyertrade ENGINE=InnoDB;
alter table shop_jingdong_product add column sync_stock tinyint(1) NOT NULL;
######### 2014-7-4 ##########
alter table shop_weixin_account add column order_updated datetime DEFAULT NULL;
alter table shop_weixin_account add column refund_updated datetime DEFAULT NULL;
######### 2014-7-1 ##########
alter table shop_weixin_account add column pay_sign_key pay_sign_key varchar(128) NOT NULL;
alter table shop_weixin_account add column partner_id varchar(32) NOT NULL;
alter table shop_weixin_account add column partner_key varchar(128) NOT NULL;
######### 2014-6-27 ##########
alter table shop_weixin_account add column pay_sign_key ;
alter table shop_users_user change column type type varchar(8) NOT NULL;
######### 2014-6-22 ##########
alter table shop_fenxiao_purchaseorder change distributor_payment distributor_payment double NOT NULL;
alter table shop_fenxiao_purchaseorder change post_fee post_fee double NOT NULL;
alter table shop_fenxiao_purchaseorder change total_fee total_fee double NOT NULL;
alter table shop_fenxiao_subpurchaseorder change total_fee total_fee double NOT NULL;
alter table shop_fenxiao_subpurchaseorder change distributor_payment distributor_payment double NOT NULL;
alter table shop_fenxiao_subpurchaseorder change buyer_payment buyer_payment double NOT NULL;
alter table shop_fenxiao_subpurchaseorder change refund_fee refund_fee double NOT NULL;
alter table shop_fenxiao_subpurchaseorder change auction_price auction_price double NOT NULL;
alter table shop_fenxiao_subpurchaseorder change price price double NOT NULL;
######### 2014-6-21 ##########
alter table shop_trades_mergetrade change payment payment double NOT NULL;
alter table shop_trades_mergetrade change discount_fee discount_fee double NOT NULL;
alter table shop_trades_mergetrade change adjust_fee adjust_fee double NOT NULL;
alter table shop_trades_mergetrade change post_fee post_fee double NOT NULL;
alter table shop_trades_mergetrade change total_fee total_fee double NOT NULL;
alter table shop_trades_mergetrade change seller_cod_fee seller_cod_fee double NOT NULL;
alter table shop_trades_mergetrade change buyer_cod_fee buyer_cod_fee double NOT NULL;
alter table shop_trades_mergetrade change cod_fee cod_fee double NOT NULL;
alter table shop_trades_mergetrade change post_cost post_cost double NOT NULL;

alter table shop_trades_mergeorder change total_fee total_fee double NOT NULL;
alter table shop_trades_mergeorder change discount_fee discount_fee double NOT NULL;
alter table shop_trades_mergeorder change adjust_fee adjust_fee double NOT NULL;
alter table shop_trades_mergeorder change payment payment double NOT NULL;
alter table shop_trades_mergeorder change price price double NOT NULL;

alter table shop_orders_trade change buyer_obtain_point_fee buyer_obtain_point_fee double NOT NULL;
alter table shop_orders_trade change payment payment double NOT NULL;
alter table shop_orders_trade change discount_fee discount_fee double NOT NULL;
alter table shop_orders_trade change adjust_fee adjust_fee double NOT NULL;
alter table shop_orders_trade change post_fee post_fee double NOT NULL;
alter table shop_orders_trade change total_fee total_fee double NOT NULL;
alter table shop_orders_trade change point_fee point_fee double NOT NULL;
alter table shop_orders_trade change real_point_fee real_point_fee double NOT NULL;
alter table shop_orders_trade change commission_fee commission_fee double NOT NULL;
alter table shop_orders_trade change seller_cod_fee seller_cod_fee double NOT NULL;
alter table shop_orders_trade change buyer_cod_fee buyer_cod_fee double NOT NULL;
alter table shop_orders_trade change cod_fee cod_fee double NOT NULL;
alter table shop_orders_trade change step_paid_fee step_paid_fee double NOT NULL;

alter table shop_orders_order change price price double NOT NULL;
alter table shop_orders_order change total_fee total_fee double NOT NULL;
alter table shop_orders_order change payment payment double NOT NULL;
alter table shop_orders_order change discount_fee discount_fee double NOT NULL;
alter table shop_orders_order change adjust_fee adjust_fee double NOT NULL;
######### 2014-6-19 ##########
alter table shop_orders_trade change receiver_mobile receiver_mobile varchar(24) NOT NULL;
alter table shop_trades_mergetrade change receiver_mobile receiver_mobile varchar(24) NOT NULL;
alter table shop_trades_mergetrade drop column alipay_no;
######### 2014-6-18 ##########
alter table shop_tmcnotify_user add quantity int(11) NOT NULL;
alter table shop_yunda_customer change memo memo varchar(100) NOT NULL;
######### 2014-6-14 ##########
alter table shop_trades_mergetrade add column is_cod tinyint(1) NOT NULL;
######### 2014-6-13 ##########
alter table shop_weixin_account add column account_id varchar(32) not NULL;
create unique index unique_account_id on shop_weixin_account(account_id);

alter table shop_users_user drop column craw_keywords;
alter table shop_users_user drop column craw_trade_seller_nicks;
alter table shop_users_user drop column item_notify_updated;
alter table shop_users_user drop column refund_notify_updated;
alter table shop_users_user drop column trade_notify_updated;
alter table shop_users_user drop column alipay_account;
alter table shop_users_user drop column promoted_type;
alter table shop_trades_mergetrade drop column seller_id;
alter table shop_trades_mergetrade drop column seller_nick;
######### 2014-5-24 ##########
alter table shop_trades_mergetrade drop index tid;
alter table shop_trades_mergetrade change column tid  tid varchar(32) NOT NULL;
alter table shop_trades_mergetrade add unique key (tid,user_id);

alter table shop_trades_mergeorder drop index oid;
alter table shop_trades_mergeorder change column oid  oid varchar(32) NOT NULL;
alter table shop_trades_mergeorder add unique key (oid,merge_trade_id);
alter table shop_trades_mergeorder drop column tid;
######### 2014-5-22 ##########
alter table shop_yunda_customer add column company_trade varchar(32) NOT NULL;
alter table shop_yunda_customer add column reserveo varchar(64) NOT NULL;
alter table shop_yunda_customer add column reservet varchar(64) NOT NULL;
######### 2014-5-12 ##########
alter table shop_trades_mergetrade add column qrcode_msg varchar(32) NOT NULL;
######### 2014-5-10 ##########
alter table shop_users_user add column user_code varchar(16) NOT NULL;
######### 2014-5-9 ##########
alter table shop_yunda_ppw change weight weight double NOT NULL;
alter table shop_yunda_ppw change upload_weight upload_weight double NOT NULL;
alter table shop_yunda_tspw change weight weight double NOT NULL;
alter table shop_yunda_tspw change upload_weight upload_weight double NOT NULL;
alter table shop_yunda_tppw change weight weight double NOT NULL;
alter table shop_yunda_tppw change upload_weight upload_weight double NOT NULL;
######### 2014-5-5 ##########
alter table shop_yunda_order add yd_customer_id int(11);
ALTER TABLE shop_yunda_order ADD FOREIGN KEY (`yd_customer_id`) REFERENCES shop_yunda_customer(`id`);
######### 2014-4-25 ##########
alter table shop_yunda_order add column is_jzhw tinyint(1) NOT NULL;
######### 2014-4-24 ##########
alter table shop_yunda_order add column parent_package_id varchar(64) NOT NULL;
create index shop_yunda_order_parent_package_id on shop_yunda_order(parent_package_id);
alter table shop_yunda_order add column upload_weight varchar(10) NOT NULL;
alter table shop_yunda_order add column uploaded datetime DEFAULT NULL;
alter table shop_yunda_order add column weighted datetime DEFAULT NULL;

alter table shop_yunda_order drop index cus_oid;
alter table shop_yunda_order add unique key (out_sid);
######### 2014-4-12 ##########
alter table shop_categorys_productcategory change parent_cid parent_cid int(11) NOT NULL;
######### 2014-4-11 ##########
alter table shop_items_productlocation add column product_id int(11) NOT NULL;
alter table shop_items_productlocation add column sku_id int(11);
alter table shop_items_productlocation drop index outer_id;
alter table shop_items_productlocation add unique key (product_id,sku_id,district_id);
######### 2014-3-27 ##########
alter table shop_weixin_account add column jmenu varchar(1024) NOT NULL;
######### 2014-3-24 ##########
alter table shop_yunda_order add column weighted datetime NOT NULL;
update shop_yunda_order set weighted=created;
######### 2014-3-22 ##########
alter table shop_memorule_composerule add column gif_count int(11) NOT NULL;
######### 2014-3-1 ##########
alter table shop_comments_comment add replayer_id int(11) DEFAULT NULL;
alter table shop_comments_comment add column replay_at datetime DEFAULT NULL;
alter table shop_comments_comment ADD FOREIGN KEY (replayer_id) REFERENCES auth_user(id);
######### 2014-1-10 ##########
drop index purchase_id on shop_purchases_item;
alter table  shop_purchases_item add UNIQUE(purchase_id,product_id,sku_id);
drop index purchase_storage_id on shop_purchases_storageitem;
alter table shop_purchases_storageitem add UNIQUE(purchase_storage_id,product_id,sku_id);
######### 2014-1-2 ##########
alter table shop_purchases_item add column product_id int(11) default null;
alter table shop_purchases_item add column sku_id int(11) default null;
alter table shop_purchases_storageitem add column product_id int(11) default null;
alter table shop_purchases_storageitem add column sku_id int(11) default null;
alter table shop_purchases_relationship add column product_id int(11) default null;
alter table shop_purchases_relationship add column sku_id int(11) default null;
alter table shop_purchases_paymentitem add column product_id int(11) default null;
alter table shop_purchases_paymentitem add column sku_id int(11) default null;
######### 2013-12-25 ##########
alter table shop_items_product add column reduce_num int(11) NOT NULL;
alter table shop_items_productsku add column reduce_num int(11) NOT NULL;
######### 2013-12-25 ##########
alter table shop_items_product add column match_reason varchar(80) NOT NULL;
alter table shop_items_productsku add column match_reason varchar(80) NOT NULL;
######### 2013-11-27 ##########
alter table shop_purchases_payment add column origin_nos longtext NOT NULL;
######### 2013-11-27 ##########
alter table shop_items_item add column with_hold_quantity int(11) NOT NULL;
alter table shop_items_item add column delivery_time datetime DEFAULT NULL;

alter table shop_items_skuproperty add column with_hold_quantity int(11) NOT NULL;
alter table shop_items_skuproperty add column sku_delivery_time datetime DEFAULT NULL;
######### 2013-11-23 ##########
alter table shop_trades_replayposttrade change column trade_ids trade_ids longtext NOT NULL;
alter table shop_trades_replayposttrade change column succ_ids succ_ids longtext NOT NULL;

######### 2013-11-02 ##########
alter table shop_items_item add column sync_stock tinyint(1) DEFAULT 1;

######### 2013-10-31 ##########
alter table shop_purchases_purchase add column creator varchar(64) NOT NULL;

######### 2013-10-12 ##########
alter table shop_trades_mergetrade add column reserveo varchar(64) NOT NULL;
alter table shop_trades_mergetrade add column reservet varchar(64) NOT NULL;
alter table shop_trades_mergetrade add column reserveh varchar(64) NOT NULL;
######### 2013-10-10 ##########
alter table shop_users_user change top_session top_session varchar(128) NOT NULL;
alter table shop_users_user change top_appkey top_appkey varchar(32) NOT NULL;
alter table shop_users_user change top_parameters top_parameters varchar(2000) NOT NULL;

alter table shop_users_user change visitor_id visitor_id varchar(64) NOT NULL;
alter table shop_users_user change uid uid varchar(64) NOT NULL;
alter table shop_users_user change nick nick varchar(64) NOT NULL;
######### 2013-10-9  ##########
alter table shop_trades_mergetrade add column is_qrcode tinyint(1) NOT NULL;
rename table shop_shipclassify_branch to shop_yunda_branch;
rename table shop_shipclassify_zone to shop_yunda_zone;
######### 2013-8-16  ##########
alter table shop_purchases_purchase add column prepay_cent double NOT NULL;
alter table shop_purchases_purchase add column attach_files varchar(100) NOT NULL;

alter table shop_purchases_storage add column is_pod tinyint(1) NOT NULL;
alter table shop_purchases_storage add column attach_files varchar(100) NOT NULL;
######### 2013-8-16  ##########
alter table shop_items_productsku change outer_id outer_id varchar(64) NOT NULL;
######### 2013-8-12  ##########
alter table shop_items_product add column post_check tinyint(1) NOT NULL;
alter table shop_items_productsku add column post_check tinyint(1) NOT NULL;
alter table shop_items_product add column barcode varchar(64) NOT NULL,add index (barcode);
alter table shop_items_productsku add column barcode varchar(64) NOT NULL,add index (barcode);
######### 2013-8-10  ##########
alter table shop_purchases_payment add column supplier_id int(11) ,add FOREIGN KEY(supplier_id) references shop_archives_supplier(id);
######### 2013-8-7  ##########
alter table shop_items_product drop district_id;
alter table shop_items_productsku drop district_id;
######### 2013-8-6  ##########
alter table shop_items_product add column district_id int(11) ,add FOREIGN KEY(district_id) references shop_archives_depositedistrict(id);
alter table shop_items_productsku add column district_id int(11) ,add FOREIGN KEY(district_id) references shop_archives_depositedistrict(id);
######### 2013-7-31  ##########
alter table shop_purchases_item change column status status varchar(12) NOT NULL;
alter table shop_purchases_item change column arrival_status arrival_status varchar(12) NOT NULL;
alter table shop_purchases_storage change column status status varchar(12) NOT NULL;
alter table shop_purchases_storageitem change column status status varchar(12) NOT NULL;
######### 2013-7-20  ###########
alter table shop_purchases_purchase add column prepay double NOT NULL;
alter table shop_purchases_item add column prepay double NOT NULL;
alter table shop_purchases_storage add column prepay double NOT NULL;
alter table shop_purchases_storageitem add column prepay double NOT NULL;
alter table shop_purchases_relationship add column prepay double NOT NULL;

######### 2013-7-20  ###########
alter table shop_monitor_systemconfig add column storage_num_to_stock_auto tinyint(1) NOT NULL;
alter table shop_monitor_systemconfig add column purchase_price_to_cost_auto tinyint(1) NOT NULL;

alter table shop_purchases_storage add column is_addon tinyint(1) NOT NULL;
alter table shop_purchases_storageitem add column is_addon tinyint(1) NOT NULL;
######### 2013-7-10  ###########
alter table shop_purchases_storage add column storage_num int(11) NOT NULL;
alter table shop_purchases_storage add column total_fee double NOT NULL;
alter table shop_purchases_storage add column payment double NOT NULL;

alter table shop_purchases_storageitem add column total_fee double NOT NULL;
alter table shop_purchases_storageitem add column payment double NOT NULL;

alter table shop_purchases_relationship add column total_fee double NOT NULL;
alter table shop_purchases_relationship change column relate_fee payment double NOT NULL;

alter table shop_monitor_systemconfig add column jhs_logistic_code varchar(20) NOT NULL;
######### 2013-7-10  ###########
alter table shop_items_productsku add column created datetime DEFAULT NULL;
update shop_items_productsku set created=modified;
alter table shop_purchases_storage change post_date post_date date DEFAULT NULL;
alter table shop_purchases_storage change forecast_date forecast_date date DEFAULT NULL;
######### 2013-7-4  ###########
alter table shop_purchases_purchase add column purchase_num int(11) default 0;
alter table shop_purchases_purchase add column storage_num int(11) default 0;
alter table shop_purchases_item add column storage_num int(11) default 0;
######### 2013-6-29 ###########
ALTER TABLE shop_purchases_purchase AUTO_INCREMENT=9999;
######### 2013-6-26 ###########
alter table shop_trades_mergeorder drop index shop_trades_mergeorder_1e04cc3c,
	drop index shop_trades_mergeorder_4db90882,add index(outer_id,outer_sku_id);
######### 2013-6-13 ###########
alter table shop_trades_replayposttrade add column fid  int(20) DEFAULT 0;
######### 2013-6-7  ###########
alter table shop_items_product add column buyer_prompt varchar(40) NOT NULL;
alter table shop_items_productsku add column buyer_prompt varchar(40) NOT NULL;
######### 2013-6-4  ###########
rename table shop_trades_replayposttrade to trades_replayposttrade;
python manage.py syncdb;
insert into shop_trades_replayposttrade(operator,post_data,order_num,trade_ids,created,finished) 
	select operator,post_data,order_num,trade_ids,created,finished from trades_replayposttrade;
######### 2013-5-30 ###########
alter table shop_trades_mergetrade add column order_num  int(11) DEFAULT 0;
alter table shop_trades_mergetrade add column prod_num   int(11) DEFAULT 0;
######### 2013-5-29 ###########
alter table shop_juhuasuan_pinpaituan add column prod_sku_name varchar(128) NOT NULL;
######### 2013-5-28 ###########
alter table shop_orders_trade add column send_time datetime DEFAULT NULL;
alter table shop_orders_trade add column is_brand_sale tinyint(1) NOT NULL;
alter table shop_orders_trade add column is_force_wlb tinyint(1) NOT NULL;
alter table shop_orders_trade add column trade_from varchar(32) NOT NULL;
alter table shop_orders_trade add column is_lgtype tinyint(1) NOT NULL;
alter table shop_orders_trade add column lg_aging datetime DEFAULT NULL;
alter table shop_orders_trade add column lg_aging_type varchar(64) NOT NULL;
alter table shop_orders_trade add column buyer_rate tinyint(1) NOT NULL;
alter table shop_orders_trade add column seller_rate tinyint(1) NOT NULL;
alter table shop_orders_trade add column seller_can_rate tinyint(1) NOT NULL;
alter table shop_orders_trade add column is_part_consign tinyint(1) NOT NULL;
alter table shop_orders_trade add column step_paid_fee varchar(10) NOT NULL;
alter table shop_orders_trade add column step_trade_status varchar(32) NOT NULL;

alter table shop_trades_mergetrade add column send_time datetime DEFAULT NULL;
alter table shop_trades_mergetrade add column is_brand_sale tinyint(1) NOT NULL;
alter table shop_trades_mergetrade add column is_force_wlb tinyint(1) NOT NULL;
alter table shop_trades_mergetrade add column trade_from int(20) NOT NULL;
alter table shop_trades_mergetrade add column is_lgtype tinyint(1) NOT NULL;
alter table shop_trades_mergetrade add column lg_aging datetime DEFAULT NULL;
alter table shop_trades_mergetrade add column lg_aging_type varchar(64) NOT NULL;
alter table shop_trades_mergetrade add column buyer_rate tinyint(1) NOT NULL;
alter table shop_trades_mergetrade add column seller_rate tinyint(1) NOT NULL;
alter table shop_trades_mergetrade add column seller_can_rate tinyint(1) NOT NULL;
alter table shop_trades_mergetrade add column is_part_consign tinyint(1) NOT NULL;
alter table shop_trades_mergetrade add column step_paid_fee varchar(10) NOT NULL;
alter table shop_trades_mergetrade add column step_trade_status varchar(32) NOT NULL;

######### 2013-5-23 ###########
alter table shop_trades_replayposttrade add column trade_ids varchar(2000) NOT NULL;
alter table shop_trades_replayposttrade add column finished datetime DEFAULT NULL;
######### 2013-5-17 ###########
alter table shop_trades_mergetrade add column charge_time datetime DEFAULT NULL;
create index index_mergetrade_charge_time on shop_trades_mergetrade(charge_time);
######### 2013-5-08 ###########
alter table shop_trades_mergetrade add column is_charged tinyint(1) NOT NULL;
######### 2013-4-22 ###########
alter table shop_monitor_systemconfig add column normal_print_limit tinyint(1) NOT NULL;
######### 2013-4-10  ##########
alter table shop_trades_mergetrade add column is_locked tinyint(1) NOT NULL;
alter table shop_monitor_systemconfig add column per_request_num int(11) DEFAULT NULL;
######### 2013-3-29  ##########
alter table shop_monitor_systemconfig add column client_num int(11) DEFAULT 3;
######### 2013-3-22  ##########
alter table shop_users_user add column sync_stock tinyint(1) NOT NULL;
alter table shop_users_user add column percentage int(11) DEFAULT 0;
######### 2013-3-19  ##########
alter table shop_refunds_refund add column is_reissue tinyint(1) NOT NULL;
######### 2013-3-18  ##########
alter table shop_refunds_product add column oid varchar(64) NOT NULL;
######### 2013-3-15  ##########
alter table shop_items_product add column is_split tinyint(1) NOT NULL;
alter table shop_items_product add column is_match tinyint(1) NOT NULL;
alter table shop_items_productsku add column is_split tinyint(1) NOT NULL;
alter table shop_items_productsku add column is_match tinyint(1) NOT NULL;
alter table shop_trades_replayposttrade add column order_num int(11) default 0;
######### 2013-3-13  ########
alter table shop_refunds_refund add column cs_status int(11) default 0;
alter table shop_refunds_refund add column mobile varchar(20) NOT NULL;
alter table shop_refunds_refund add column phone varchar(20) NOT NULL;
######### 2013-3-12  ########
alter table shop_refunds_product add column num int(11) NOT NULL;
######### 2013-3-8   ########
alter table shop_items_productsku drop column prod_outer_id;
######### 2013-3-6   #########
drop table shop_purchase_product;
drop table shop_purchase_productsku;
drop table shop_purchases_purchase;
drop table shop_purchases_item;
drop table shop_purchases_storage;
drop table shop_purchases_storageitem;

alter table shop_items_product drop column price;
alter table shop_items_product drop column purchase_product_id;
alter table shop_items_product drop column out_stock;
alter table shop_items_product add column wait_post_num int(11) DEFAULT NULL;
alter table shop_items_product add column cost decimal(5,2) DEFAULT NULL;
alter table shop_items_product add column std_purchase_price decimal(5,2) DEFAULT NULL;
alter table shop_items_product add column std_sale_price decimal(5,2) DEFAULT NULL;
alter table shop_items_product add column agent_price decimal(5,2) DEFAULT NULL;
alter table shop_items_product add column staff_price decimal(5,2) DEFAULT NULL;
alter table shop_items_product add column weight varchar(10) NOT NULL;
alter table shop_items_product add column memo varchar(1000) NOT NULL;

alter table shop_items_productsku drop column purchase_product_sku_id;
alter table shop_items_productsku drop column out_stock;
alter table shop_items_productsku drop column properties;
alter table shop_items_productsku add column properties_alias varchar(200) NOT NULL;
alter table shop_items_productsku add column wait_post_num int(11) DEFAULT NULL;
alter table shop_items_productsku add column cost decimal(5,2) DEFAULT NULL;
alter table shop_items_productsku add column std_purchase_price decimal(5,2) DEFAULT NULL;
alter table shop_items_productsku add column std_sale_price decimal(5,2) DEFAULT NULL;
alter table shop_items_productsku add column agent_price decimal(5,2) DEFAULT NULL;
alter table shop_items_productsku add column staff_price decimal(5,2) DEFAULT NULL;
alter table shop_items_productsku add column weight varchar(10) NOT NULL;
alter table shop_items_productsku add column memo varchar(1000) NOT NULL;
######### 2013-3-5   #########
alter table shop_users_user add column is_primary tinyint(1) NOT NULL;
######### 2013-2-28   #########
drop table shop_purchase_product;
drop table shop_purchase_productsku;
drop table shop_purchases_deposite;
drop table shop_purchases_item;
drop table shop_purchases_purchase;
drop table shop_purchases_purchasetype;
drop table shop_purchases_storage;
drop table shop_purchases_storageitem;
drop table shop_purchases_supplier;
drop table shop_purchases_suppliertype;

######### 2013-2-22   #########
create index idx_mergetrade_receiver_mobile on shop_trades_mergetrade(receiver_mobile);
create index idx_mergetrade_receiver_phone on shop_trades_mergetrade(receiver_phone);
########  2013-2-21   #########
alter table shop_trades_mergetrade add column return_out_sid varchar(64) NOT NULL;
create index index_mergetrade_return_out_sid on shop_trades_mergetrade(return_out_sid);
alter table shop_trades_mergetrade add column return_logistic_company varchar(64) NOT NULL;
########  2013-2-20   #########
alter table shop_trades_mergetrade add column weight_time datetime DEFAULT NULL;
(update shop_trades_mergetrade set weight_time = consign_time;)
########  2013-1-15   #########
alter table shop_trades_mergetrade add column can_review tinyint(1) NOT NULL;
########  2013-1-14   #########
alter table shop_trades_mergeorder add column is_reverse_order tinyint(1) NOT NULL;
########  2013-1-11   #########
alter table shop_trades_mergetrade add column has_sys_err tinyint(1) NOT NULL;
########  2012-12-29  #########
CREATE UNIQUE INDEX uniq_item_outer_and_sku_id ON shop_memorule_composerule(outer_id,outer_sku_id);
########  2012-12-28  #########
alter table shop_users_user add column contacter varchar(32) NOT NULL;
alter table shop_users_user add column phone varchar(20) NOT NULL;
alter table shop_users_user add column mobile varchar(20) NOT NULL;
alter table shop_users_user add column area_code varchar(10) NOT NULL;
########  2012-12-12  #########
alter table shop_monitor_systemconfig drop is_confirm_delivery_auto;
########  2012-12-06  #########
alter table shop_trades_mergetrade drop year;
alter table shop_trades_mergetrade drop month;
alter table shop_trades_mergetrade drop day;
alter table shop_trades_mergetrade drop hour;
alter table shop_trades_mergetrade drop week;

alter table shop_trades_mergeorder drop year;
alter table shop_trades_mergeorder drop month;
alter table shop_trades_mergeorder drop day;
alter table shop_trades_mergeorder drop hour;
alter table shop_trades_mergeorder drop week;

create index outer_id_idx on shop_trades_mergeorder(outer_id);
create index outer_sku_id_idx on shop_trades_mergeorder(outer_sku_id);
########  2012-12-04  #########
alter table shop_trades_mergeorder add column gift_type int(11) NOT NULL;

########  2012-11-22  #########
alter table shop_orders_trade add column seller_flag int(11) DEFAULT NULL;
alter table shop_trades_mergetrade add column seller_flag int(11) DEFAULT NULL;
alter table shop_fenxiao_purchaseorder add column supplier_flag int(11) DEFAULT NULL;
########  2012-11-15  #########
alter table shop_trades_mergetrade add column has_out_stock tinyint(1) NOT NULL;
alter table shop_trades_mergetrade add column has_rule_match tinyint(1) NOT NULL;
alter table shop_trades_mergeorder add column out_stock tinyint(1) NOT NULL; 

alter table shop_users_user drop column update_items_datetime ;
alter table shop_users_user add column item_notify_updated datetime DEFAULT NULL;
alter table shop_users_user add column refund_notify_updated datetime DEFAULT NULL;
alter table shop_users_user add column trade_notify_updated datetime DEFAULT NULL;

alter table shop_trades_mergetrade add column has_merge tinyint(1) NOT NULL;
alter table shop_trades_mergeorder add column is_merge tinyint(1) NOT NULL;
alter table shop_trades_mergeorder add column is_rule_match tinyint(1) NOT NULL;
########  2012-10-12  #########
alter table shop_trades_mergeorder add column sys_status varchar(32) NOT NULL;
alter table shop_items_product add column is_assign tinyint(1) NOT NULL;
alter table shop_items_productsku add column is_assign tinyint(1) NOT NULL;
########  2012-09-29  #########
shop_items_product :
purchase_product
wait_num
remain_num
shop_items_productsku:
purchase_product_sku
wait_num
remain_num
############## 2012-09-16 ###############
 alter table shop_items_product add column status varchar(16)  NOT NULL; 
########  2012-07-28  #########
alter table shop_orders_trade add column seller_cod_fee varchar(10) NOT NULL;

alter table shop_orders_trade add column buyer_cod_fee varchar(10) NOT NULL;

alter table shop_orders_trade add column cod_fee varchar(10) NOT NULL;

alter table shop_orders_trade add column cod_status varchar(32) NOT NULL;

######## 2012-06-26 ########
alter table shop_item change column outer_iid outer_id varchar(64) NOT NULL;

alter table shop_itemnumtask change column outer_iid outer_id varchar(64) NOT NULL;

alter table shop_app_productrulefield change column out_iid outer_id varchar(64) NOT NULL;

alter table shop_item change column modified modified datetime DEFAULT NULL;

alter table shop_item change column list_time list_time datetime DEFAULT NULL;

alter table shop_item change column delist_time delist_time datetime DEFAULT NULL;

