######### 2013-3-13  ########
alter table shop_refunds_refund add column cs_status int(11) default 0;
alter table shop_refunds_refund add column mobile varchar(20) NOT NULL;
alter table shop_refunds_refund add column phone varchar(20) NOT NULL;
######### 2013-3-12  ########
alter table shop_refunds_product add column num int(11) NOT NULL;
######### 2013-3-8   ########
alter table shop_items_productsku drop column prod_outer_id;
######### 2013-3-6   #########
drop table shop_purchase_product;
drop table shop_purchase_productsku;
drop table shop_purchases_purchase;
drop table shop_purchases_item;
drop table shop_purchases_storage;
drop table shop_purchases_storageitem;

alter table shop_items_product drop column price;
alter table shop_items_product drop column purchase_product_id;
alter table shop_items_product drop column out_stock;
alter table shop_items_product add column wait_post_num int(11) DEFAULT NULL;
alter table shop_items_product add column cost decimal(5,2) DEFAULT NULL;
alter table shop_items_product add column std_purchase_price decimal(5,2) DEFAULT NULL;
alter table shop_items_product add column std_sale_price decimal(5,2) DEFAULT NULL;
alter table shop_items_product add column agent_price decimal(5,2) DEFAULT NULL;
alter table shop_items_product add column staff_price decimal(5,2) DEFAULT NULL;
alter table shop_items_product add column weight varchar(10) NOT NULL;
alter table shop_items_product add column memo varchar(1000) NOT NULL;

alter table shop_items_productsku drop column purchase_product_sku_id;
alter table shop_items_productsku drop column out_stock;
alter table shop_items_productsku drop column properties;
alter table shop_items_productsku add column properties_alias varchar(200) NOT NULL;
alter table shop_items_productsku add column wait_post_num int(11) DEFAULT NULL;
alter table shop_items_productsku add column cost decimal(5,2) DEFAULT NULL;
alter table shop_items_productsku add column std_purchase_price decimal(5,2) DEFAULT NULL;
alter table shop_items_productsku add column std_sale_price decimal(5,2) DEFAULT NULL;
alter table shop_items_productsku add column agent_price decimal(5,2) DEFAULT NULL;
alter table shop_items_productsku add column staff_price decimal(5,2) DEFAULT NULL;
alter table shop_items_productsku add column weight varchar(10) NOT NULL;
alter table shop_items_productsku add column memo varchar(1000) NOT NULL;
######### 2013-3-5   #########
alter table shop_users_user add column is_primary tinyint(1) NOT NULL;
######### 2013-2-28   #########
drop table shop_purchase_product;
drop table shop_purchase_productsku;
drop table shop_purchases_deposite;
drop table shop_purchases_item;
drop table shop_purchases_purchase;
drop table shop_purchases_purchasetype;
drop table shop_purchases_storage;
drop table shop_purchases_storageitem;
drop table shop_purchases_supplier;
drop table shop_purchases_suppliertype;

######### 2013-2-22   #########
create index idx_mergetrade_receiver_mobile on shop_trades_mergetrade(receiver_mobile);
create index idx_mergetrade_receiver_phone on shop_trades_mergetrade(receiver_phone);
########  2013-2-21   #########
alter table shop_trades_mergetrade add column return_out_sid varchar(64) NOT NULL;
create index index_mergetrade_return_out_sid on shop_trades_mergetrade(return_out_sid);
alter table shop_trades_mergetrade add column return_logistic_company varchar(64) NOT NULL;
########  2013-2-20   #########
alter table shop_trades_mergetrade add column weight_time datetime DEFAULT NULL;
(update shop_trades_mergetrade set weight_time = consign_time;)
########  2013-1-15   #########
alter table shop_trades_mergetrade add column can_review tinyint(1) NOT NULL;
########  2013-1-14   #########
alter table shop_trades_mergeorder add column is_reverse_order tinyint(1) NOT NULL;
########  2013-1-11   #########
alter table shop_trades_mergetrade add column has_sys_err tinyint(1) NOT NULL;
########  2012-12-29  #########
CREATE UNIQUE INDEX uniq_item_outer_and_sku_id ON shop_memorule_composerule(outer_id,outer_sku_id);
########  2012-12-28  #########
alter table shop_users_user add column contacter varchar(32) NOT NULL;
alter table shop_users_user add column phone varchar(20) NOT NULL;
alter table shop_users_user add column mobile varchar(20) NOT NULL;
alter table shop_users_user add column area_code varchar(10) NOT NULL;
########  2012-12-12  #########
alter table shop_monitor_systemconfig drop is_confirm_delivery_auto;
########  2012-12-06  #########
alter table shop_trades_mergetrade drop year;
alter table shop_trades_mergetrade drop month;
alter table shop_trades_mergetrade drop day;
alter table shop_trades_mergetrade drop hour;
alter table shop_trades_mergetrade drop week;

alter table shop_trades_mergeorder drop year;
alter table shop_trades_mergeorder drop month;
alter table shop_trades_mergeorder drop day;
alter table shop_trades_mergeorder drop hour;
alter table shop_trades_mergeorder drop week;

create index outer_id_idx on shop_trades_mergeorder(outer_id);
create index outer_sku_id_idx on shop_trades_mergeorder(outer_sku_id);
########  2012-12-04  #########
alter table shop_trades_mergeorder add column gift_type int(11) NOT NULL;

########  2012-11-22  #########
alter table shop_orders_trade add column seller_flag int(11) DEFAULT NULL;
alter table shop_trades_mergetrade add column seller_flag int(11) DEFAULT NULL;
alter table shop_fenxiao_purchaseorder add column supplier_flag int(11) DEFAULT NULL;
########  2012-11-15  #########
alter table shop_trades_mergetrade add column has_out_stock tinyint(1) NOT NULL;
alter table shop_trades_mergetrade add column has_rule_match tinyint(1) NOT NULL;
alter table shop_trades_mergeorder add column out_stock tinyint(1) NOT NULL; 

alter table shop_users_user drop column update_items_datetime ;
alter table shop_users_user add column item_notify_updated datetime DEFAULT NULL;
alter table shop_users_user add column refund_notify_updated datetime DEFAULT NULL;
alter table shop_users_user add column trade_notify_updated datetime DEFAULT NULL;

alter table shop_trades_mergetrade add column has_merge tinyint(1) NOT NULL;
alter table shop_trades_mergeorder add column is_merge tinyint(1) NOT NULL;
alter table shop_trades_mergeorder add column is_rule_match tinyint(1) NOT NULL;
########  2012-10-12  #########
alter table shop_trades_mergeorder add column sys_status varchar(32) NOT NULL;
alter table shop_items_product add column is_assign tinyint(1) NOT NULL;
alter table shop_items_productsku add column is_assign tinyint(1) NOT NULL;
########  2012-10-07  #########
insert into shop_trades_mergetrade(tid,user_id,seller_id,seller_nick,buyer_nick,type,shipping_type,total_num,payment,discount_fee,adjust_fee,post_fee,total_fee,alipay_no,seller_cod_fee,buyer_cod_fee,cod_fee,cod_status,weight,post_cost,buyer_message,seller_memo,sys_memo,created,pay_time,modified,consign_time,out_sid,logistics_company_name,receiver_name,receiver_state,receiver_city,receiver_district,receiver_address,receiver_zip,receiver_mobile,receiver_phone,year,month,week,day,hour,reverse_audit_reason,status,is_picking_print,is_express_print,is_send_sms,has_refund,out_goods,has_memo,remind_time,refund_num,sys_status) select tid,user_id,seller_id,seller_nick,buyer_nick,type,shipping_type,total_num,payment,discount_fee,adjust_fee,post_fee,total_fee,alipay_no,seller_cod_fee,buyer_cod_fee,cod_fee,cod_status,weight,post_cost,buyer_message,seller_memo,sys_memo,created,pay_time,modified,consign_time,out_sid,logistics_company_name,receiver_name,receiver_state,receiver_city,receiver_district,receiver_address,receiver_zip,receiver_mobile,receiver_phone,year,month,week,day,hour,reverse_audit_reason,status,is_picking_print,is_express_print,is_send_sms,has_refund,out_goods,has_memo,remind_time,refund_num,sys_status from shop_trades_mergetrade_tmp;
########  2012-09-29  #########
shop_items_product :
purchase_product
wait_num
remain_num
shop_items_productsku:
purchase_product_sku
wait_num
remain_num
############## 2012-09-16 ###############
 alter table shop_items_product add column status varchar(16)  NOT NULL; #add index
########  2012-07-28  #########
alter table shop_orders_trade add column seller_cod_fee varchar(10) NOT NULL;

alter table shop_orders_trade add column buyer_cod_fee varchar(10) NOT NULL;

alter table shop_orders_trade add column cod_fee varchar(10) NOT NULL;

alter table shop_orders_trade add column cod_status varchar(32) NOT NULL;

######## 2012-06-26 ########
alter table shop_item change column outer_iid outer_id varchar(64) NOT NULL;

alter table shop_itemnumtask change column outer_iid outer_id varchar(64) NOT NULL;

alter table shop_app_productrulefield change column out_iid outer_id varchar(64) NOT NULL;

alter table shop_item change column modified modified datetime DEFAULT NULL;

alter table shop_item change column list_time list_time datetime DEFAULT NULL;

alter table shop_item change column delist_time delist_time datetime DEFAULT NULL;

