<!DOCTYPE html>
<html >
  <head>
    <title>库存商品</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="{{ STATIC_URL }}css/base.less" rel="stylesheet/less" type="text/css" />
    <script src="{{ STATIC_URL }}closure-library/closure/goog/base.js"></script>
    <script src="{{ STATIC_URL }}jquery/jquery-1.8.13.min.js" type="text/javascript"></script>
    <script src='{{ STATIC_URL }}jquery/jquery-ui-1.8.13.min.js'></script>
    <script src="{{ STATIC_URL }}jquery-datatable-addon/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}jquery-table2csv-addon/jquery.table2csv.0.1.1.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}jquery/addons/jquery.upload.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}jquery/addons/jquery.validate.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}jquery/addons/cn_message.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}jquery/addons/chosen_v1.0.0/chosen.jquery.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}admin/js/admin/RelatedObjectLookups.js" type="text/javascript"></script>
    <style type="text/css" title="currentStyle">
    	@import "{{ STATIC_URL }}bootstrap/css/bootstrap-responsive.min.css";
		@import "{{ STATIC_URL }}bootstrap/css/bootstrap.min.css";
		@import "{{ STATIC_URL }}jquery/jquery-ui-1.10.1.css";
		@import "{{ STATIC_URL }}jquery-datatable-addon/css/demo_page.css";
		@import "{{ STATIC_URL }}jquery-datatable-addon/css/demo_table.css";
		@import "{{ STATIC_URL }}jquery/addons/chosen_v1.0.0/chosen.min.css";
    </style>  
    <style type="text/css">
    body,div{
    	margin:0px auto;
    	padding:0px;
    }
    body{
    	width:1000px;
    }
    .table-bordered {
	    border: 1px solid #DDD;
	    border-collapse: separate;
	    border-left: 0;
	    border-top:0;
	    -webkit-border-radius: 4px;
	    -moz-border-radius: 4px;
	    border-radius: 4px;
	}
	.table {
	    width: 100%;
	    margin-bottom: 4px;
	}
	form {
		margin-bottom:4px;
	}
	table {
	    max-width: 100%;
	    background-color: white;
	    border-collapse: collapse;
	    border-spacing: 0;
	}
	tr {
	    display: table-row;
	    vertical-align: inherit;
	    border-color: inherit;
	}
	.table-bordered th, .table-bordered td {
	    border-left: 1px solid #DDD;
	}
	.table tbody tr:hover td, .table tbody tr:hover th {
	    background-color: whiteSmoke;
	}
    .simple-text {
	    width:120px;
	    height:16px;
	    display:inline;
	    margin:0px 0px;
	}
	.head-title label{
		font-size:24px;
		line-height:24px;
	}
	.content-main{
		margin-top:40px;
		display:fixed;
	}
	.content-base-info {
		display:fixed;
	}
	label{
		display:inline;
		margin:0px 10px;
	}
	select {
		width:200px;
		display:inline;
		margin-bottom:2px;
	}
	.head-left {
		display:inline;
		float:left;
	}
	.head-right{
		float:right;
		margin-right:10px;
		display:inline;
		margin-bottom:20px;
	}
	.product-search{
		margin:0px 10px;
	}
	.trade-search{
		float:right;
	}
	.content-search {
		width:100%;
		height:20px;
	}
	.panel-body .table {
		border-color: gray;
		margin-bottom:0px;
	}
	
	#product-table input[type="text"]{
		width:90px;
		margin-bottom:0px;
		margin-top:0px;
		height:14px;
	}
	
	#productsku-table input[type="text"]{
		width:60px;
		margin-bottom:0px;
		margin-top:0px;
		height:14px;
	}
	
	textarea{
		margin-bottom:2px;
	}
	label.error {
	    color: red;
	    font-weight: bold;
	}
    </style>
  </head>

{% with product=object %}
 <body>
	<div class="content-main">
		<fieldset>
			<legend>
				<h2 class="head-title" >商品信息
					(ID:<label id="product_id" class="label label-success">{{ product.id }}</label>,
					状态:<label class="label label-success">{{ product.status }}</label>)
				</h2>
			</legend>
			<div class="content-base-info">
				<form id="product-form" method="POST" action="/product/{{ product.id }}/">
				{% csrf_token %}
				<input type="hidden" id="id" name="id" value="{{ product.id }}" />
				<table id="product-table" class="table table-bordered table-striped table-condensed">
					<tr>
						<td>
							<label for='outer_id'>商品编码</label>
							<input type="text" id="outer_id" name="outer_id" class="simple-text" value="{{ product.outer_id }}"/>
						</td>
						<td colspan="2">
							<label for='barcode'>扫描条码</label>
							<input type="text" id="barcode" name="barcode" class="simple-text" style="width:200px;" value="{{ product.barcode }}"/>
						</td>
						<td colspan="2">
							<label for='name'>标&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;题</label>
							<input type="text" id="name" name="name" class="simple-text" style="width:250px;" value="{{ product.name }}"/>
						</td>
					</tr>
					<tr>
						<td>
							<label for='collect_num'>库&nbsp;存&nbsp;&nbsp;数</label>
							<input type="text" id="collect_num"  class="product-num simple-text" value="{{ product.collect_num }}"/>
						</td>
						<td>
							<label for='remain_num'>保&nbsp;留&nbsp;&nbsp;数</label>
							<input type="text" id="remain_num" name="remain_num" class="simple-text" value="{{ product.remain_num }}"/>
						</td>
						<td>
							<label for='warn_num'>警&nbsp;戒&nbsp;&nbsp;数</label>
							<input type="text" id="warn_num" name="warn_num" class="simple-text" value="{{ product.warn_num }}"/>
						</td>
						<td>
							<label for='wait_post_num'>待&nbsp;发&nbsp;&nbsp;数</label>
							<input type="text" id="wait_post_num" name="wait_post_num" class="simple-text" value="{{ product.wait_post_num }}"/>
						</td>
						<td>
							<label for='weight'>重&nbsp;&nbsp;&nbsp;量</label>
							<input type="text" id="weight" name="weight" class="simple-text" value="{{ product.weight }}"/>
						</td>
					</tr>
					<tr>
						<td>
							<label for='cost'>成&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本</label>
							<input type="text" id="cost" name="cost" class="simple-text" value="{{ product.cost }}"/>
						</td>
						<td>
							<label for='std_purchase_price'>标准进价</label>
							<input type="text" id="std_purchase_price" name="std_purchase_price" class="simple-text" value="{{ product.std_purchase_price }}"/>
						</td>
						<td>
							<label for='std_sale_price'>标准售价</label>
							<input type="text" id="std_sale_price" name="std_sale_price" class="simple-text" value="{{ product.std_sale_price }}"/>
						</td>
						<td>
							<label for='agent_price'>代理售价</label>
							<input type="text" id="agent_price" name="agent_price" class="simple-text" value="{{ product.agent_price }}"/>
						</td>
						<td>
							<label for='staff_price'>员工价</label>
							<input type="text" id="staff_price" name="staff_price" class="simple-text" value="{{ product.staff_price }}"/>
						</td>
					</tr>
					<tr>
						<td>
							<label for='is_split'>需拆分</label>
							<input type="checkbox" id="is_split" name="is_split" class="simple-text" value="{{ product.is_split }}"/>
						</td>
						<td>
							<label for='is_match'>有匹配</label>
							<input type="checkbox" id="is_match" name="is_match" class="simple-text" value="{{ product.is_match }}"/>
						</td>
						<td>
							<label for='sync_stock'>库存同步</label>
							<input type="checkbox" id="sync_stock" name="sync_stock" class="simple-text required" value="{{ product.sync_stock}}"/>
						</td>
						<td colspan="2">
							<label for='post_check'>需扫描</label>
							<input type="checkbox" id="post_check" name="post_check" class="simple-text required" value="{{ product.post_check }}"/>
						</td>
					</tr>
					<tr>
						<td colspan="2">
							<label for='buyer_prompt'>客户提示</label>
							<textarea id="buyer_prompt" style="width:200px;" name="buyer_prompt" rows="2" cols="100">{{ product.buyer_prompt }}</textarea>
						</td>
						<td colspan="2">
							<label for='memo'>备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注</label>
							<textarea id="memo" style="width:200px;" name="memo" rows="2" cols="200">{{ product.memo }}</textarea>
						</td>
						<td style="text-align:center;padding-top:20px;">
							<input type="submit" class="btn btn-primary" value="保存 +"/>
						</td>
					</tr>
				</table>
				</form>
			</div>
			<div class="panel-body">
				<div class="panel-content">
					<div>
						<h3>
							商品规格列表
						</h3>
					</div>
					<div id="product-skus">
						<table id="productsku-table" class="table table-bordered table-condensed">
							<thead>
								<tr>
									<th>规格编码</th>
									<th>线上属性</th>
									<th>系统属性</th>
									<th>库存数</th>
									<th>待发数</th>
									<th>预留数</th>
									<th>警戒数</th>
									<th>成本价</th>
									<th>标售价</th>
									<th>代理价</th>
									<th>员工价</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody>
								{% for sku in product.skus %}
								<tr class="{% cycle 'odd' 'even' %}">
									<td>{{ sku.outer_id }}</td>
									<td>{{ sku.properties_name }}</td>
									<td>{{ sku.properties_alias }}</td>
									<td>{{ sku.quantity }}</td>
									<td>{{ sku.wait_post_num }}</td>
									<td>{{ sku.remain_num }}</td>
									<td>{{ sku.warn_num }}</td>
									<td>{{ sku.cost }}</td>
									<td>{{ sku.std_sale_price }}</td>
									<td>{{ sku.agent_price }}</td>
									<td>{{ sku.staff_price }}</td>
									<td>{{ sku. }}</td>
									<td><a class="edit" href="#" title="修改"><icon
										class="icon-edit"></icon></a><a class="setup" href="#" title="设置"><icon
										class="icon-asterisk"></icon></a><a class="remain" href="#" title="待用"><icon
										class="icon-pause"></icon></a><a class="delete" href="#" title="作废"><icon
										class="icon-remove"></icon></a>
									</td>
								</tr>
								{% endfor %}
							</tbody>
							<tfoot>
								<tr><td colspan="3"></td>
									<td><input id="total_num" type="text"  value="0" readonly/></td>
									<td><input id="total_wait_num" type="text"  value="0.0" readonly/></td>
									<td></td>
									<td >总成本：</td>
									<td><input id="total_cost" type="text"  value="0.0" readonly/></td>
								</tr>
							</tfoot>
						</table>
					</div>
				</div>
			</div>
		</fieldset>
	</div>
	<!-- 采购项目选择对话框 -->
	<div id="purchase-prompt" class="purchase-prompt">
		<div id="purchase-prompt-head" class="purchase-prompt-head">
			<h4 class="prompt-title">采购项目选择框</h4>
			<a id="prompt-close" class="prompt-close"><i class="icon-remove-sign"></i></a>
		</div>
		<div id="purchase-prompt-body" class="purchase-prompt-body">
			<table id="purchase-select-table" class="table table-bordered">
				<thead>
						<th>序号</th>
						<th>商家编码</th>
						<th>商品名</th>
						<th>规格编码</th>
						<th>规格名</th>
						<th>标准进价</th>
						<th>采购数</th>
						<th>操作</th>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
	</div>
</body>
{% endwith %}
<script src="{{ STATIC_URL }}script/base.js"></script>
<script type="text/javascript">
	$("#purchase-form").validate({rules: {
			extra_name: 'required',
			receiver_name: 'required',
			supplier_id: 'required',
			deposite_id: 'required',
			service_date: 'required',
            prepay_cent: {required:true,number:true,max:1},
     },});
     $('.chosen-select').chosen({search_contains:true});
</script>
</html>