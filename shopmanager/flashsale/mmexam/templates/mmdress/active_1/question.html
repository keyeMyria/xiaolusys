{% extends "mmdress/base_dress.html" %}

{% load url from future %}
{% block title %} 妈妈穿衣品味测试-测试１ {% endblock %}

{% load static %}

{% block head_script %}
<style>
.container-nav{
    margin-top:30px;
}
.container-fluid{
    position: fixed;
}
.page-panel{
    min-height:80%;
}
.question-img{
    position: relative;
    max-width:290px;
    margin:0 auto;
}
.choice .fullfill{
    border:1px dotted grey;
}
.choice{
    position:absolute;
    top:0;
    left:50%;
    width:240px; 
    margin-left:-120px;
}

.model_1{
     top:35%;
}

.model_1 ul,.model_1 ul li{
    padding:0;
    padding:0;
    list-style:none;
}

.model_1 ul li{
    display:inline;
    float:left;
    height:110px;
    width:110px;
    margin-right:10px;
    max-height:110px;
    margin-bottom:38px;
}

.model_2{
    top:32%;
}

.model_2 ul,.model_2 ul li{
    padding:0;
    padding:0;
    list-style:none;
}
.model_2 ul li{
    height:120px;
    max-height:120px;
    margin-bottom:35px;
}

.model_3{
    top:28%;
}

.model_3 ul,.model_3 ul li{
    padding:0;
    padding:0;
    list-style:none;
}
.model_3 ul li{
    height:90px;
    max-height:90px;
    margin-bottom:16px;
}

</style>
{% endblock %}

{% block container-nav %}
<!-- 页头 -->
{% endblock %}

{% block container-body %}
<!-- 内容区 -->
<div class="page-panel">
  <div class="row div-center question-img">
    <img class="carousel-inner img-responsive img-rounded " src="{{question.image}}"/>
    <div class="page-mask"></div>
	<div class="row choice {{question.style}}">
	  <ul>
	  {% for c in question.choices %}
	    <li >
	        <a href="javascript:void(0);" action="{% url 'dress_question' active_id=active_id %}" onclick="submit(this);"
	          scores="{{score_string}},{{question.id}}_{{c.1}}" dress_id="{{dress_id}}" question_id="{{post_question_id}}" >
	        <div class="fullfill"></div>
	        </a>
	    </li>
	  {% endfor %}
	  </ul>
	</div>
  </div>
</div>
{% endblock %}

{% block container-foot %}
{% if question.id > 1 %}
<div class="page-footer">
    <div class="row div-center">
        <a href="javascript:void(0);" action="{% url 'dress_question' active_id=active_id %}" onclick="submit(this);"
           dress_id="{{dress_id}}" question_id="{{pre_question_id}}"  scores="{{score_string}}" >
        <img class="col-xs-offset-1 col-sm-offset-5" src="http://7xogkj.com2.z0.glb.qiniucdn.com/dress_%E9%A2%98%E7%9B%AE-%E6%8C%89%E9%94%AE-%E8%BF%94%E5%9B%9E%E4%B8%8A%E9%A2%98%20.png">
        </a>
    </div>
</div>
{% endif %}
<!-- 页尾 -->
{% endblock %}

{% block tail_script %}
<script>
function submit(ele){
    console.log(ele);
    var scores = $(ele).attr('scores');
    var action = $(ele).attr('action');
    var dress_id = $(ele).attr('dress_id');
    var question_id = $(ele).attr('question_id');
    var callback = function(resp,status,xhr){
        document.write(resp);
        document.close();
    }
    $.ajax({ 
        type:'post', 
        url:action, 
        data:{'scores':scores, 'dress_id':dress_id, 'question_id':question_id}, 
        success:callback ,
        error:function(err){
            alert('保存出错：'+err.responseText);
        }
    }); 
}
</script>
{% endblock %}
